<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Your Order - Jade Delight</title>
    <link rel="icon" href="icon.png">
    <link rel="stylesheet" href="style.css">
    <script
      src="https://code.jquery.com/jquery-3.6.0.js"
      integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
      crossorigin="anonymous">
    </script>
  </head>
  <body>
    <script language="javascript">
    
      window.onload = function() {
        
        /* get the order info object created in the previous window */
        const orderInfo = JSON.parse(localStorage.getItem("orderInfo"));
        
        /* Print the estimated pickup/delivery time */
        timeString = "Your order will be ";
        if (orderInfo.pickup) {
          timeString += "ready for pickup at " + orderInfo.time;
        } else {
          timeString += "delivered at " + orderInfo.time;
        }
        $("#time")[0].innerHTML = timeString;
        
        /* Print the cost information */
        $("#subtotal")[0].innerHTML += orderInfo.subtotal;
        $("#tax")[0].innerHTML += orderInfo.tax;
        $("#total")[0].innerHTML += orderInfo.total;
      }
      
    </script>
    
    <h1>Jade Delight</h1>
    <br>Thank you for your order!
    
    <div id="time"></div>
    
    <div class="content">
      <div class="order">
        <table id="reciept">
          <tr>
            <th>Item</th><th>Quantity</th><th>Price</th>
          </tr>
          <script language="javascript">
            
            /* add a row for each item the customer ordered */
            const orderInfo = JSON.parse(localStorage.getItem("orderInfo"));
            s = "";
            for (let i = 0; i < orderInfo.items.length; i++) {
          	  s += "<tr>";
              s += "<td class='reciept-n'>" + orderInfo.items[i].name + "</td>";
              s += "<td class='reciept-q'>" + orderInfo.items[i].quan + "</td>";
              s += "<td class='reciept-c'>$" + orderInfo.items[i].cost + "</td>";
          	  s += "</tr>";
            }
            document.writeln(s);
          </script>
        </table>
      </div>
    </div>
    
    <div class="content">
      <div class="cost-row">
        <div class="cost-label">Subtotal: </div>
        <div class="cost-value" id="subtotal">$</div>
      </div>
      <div class="cost-row">
        <div class="cost-label">Tax (6.25%): </div>
        <div class="cost-value" id="tax">+ $</div>
      </div>
      <div class="cost-row" id="total-row">
        <div class="cost-label">Total: </div>
        <div class="cost-value" id="total">$</div>
      </div>
    </div>
  </body>
</html>